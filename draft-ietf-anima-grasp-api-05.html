<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Generic Autonomic Signaling Protocol Application Program Interface (GRASP API)</title>
<meta content="Brian Carpenter" name="author">
<meta content="Bing Liu" name="author">
<meta content="Wendong Wang" name="author">
<meta content="Xiangyang Gong" name="author">
<meta content="
       This document is a conceptual outline of an application
      programming interface (API) for the
      Generic Autonomic Signaling Protocol (GRASP). Such an API is needed for
      Autonomic Service Agents (ASA) calling the GRASP protocol module to
      exchange autonomic network messages with other ASAs. Since GRASP is
      designed to support asynchronous operations, the API will need to
      be adapted to the support for asynchronicity in various languages
      and operating systems. 
    " name="description">
<meta content="xml2rfc 2.44.0" name="generator">
<meta content="draft-ietf-anima-grasp-api-05" name="ietf.draft">
<link href="/var/tmp/CGItemp7808.dir/draft-ietf-anima-grasp-api-05.xml" type="application/rfc+xml" rel="alternate">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}</style>
<link href="rfc-local.css" type="text/css" rel="stylesheet">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">GRASP API</td>
<td class="right">May 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Carpenter, et al.</td>
<td class="center">Expires 9 November 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-anima-grasp-api-05</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-05-08" class="published">8 May 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-11-09">9 November 2020</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">B. E. Carpenter</div>
<div class="org">Univ. of Auckland</div>
</div>
<div class="author">
      <div class="author-name">B. Liu, <span class="editor">Ed.</span>
</div>
<div class="org">Huawei Technologies</div>
</div>
<div class="author">
      <div class="author-name">W. Wang</div>
<div class="org">BUPT University</div>
</div>
<div class="author">
      <div class="author-name">X. Gong</div>
<div class="org">BUPT University</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Generic Autonomic Signaling Protocol Application Program Interface (GRASP API)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document is a conceptual outline of an application
      programming interface (API) for the
      Generic Autonomic Signaling Protocol (GRASP). Such an API is needed for
      Autonomic Service Agents (ASA) calling the GRASP protocol module to
      exchange autonomic network messages with other ASAs. Since GRASP is
      designed to support asynchronous operations, the API will need to
      be adapted to the support for asynchronicity in various languages
      and operating systems.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 9 November 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-grasp-api-for-asa" class="xref">GRASP API for ASA</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-design-principles" class="xref">Design Principles</a><a href="#section-toc.1-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1" class="keepWithNext"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-asynchronous-operations" class="xref">Asynchronous Operations</a><a href="#section-toc.1-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-api-definition" class="xref">API definition</a><a href="#section-toc.1-1.2.2.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.2.2.3.2.1">
                    <p id="section-toc.1-1.2.2.3.2.1.1"><a href="#section-2.3.1" class="xref">2.3.1</a>.  <a href="#name-parameters-and-data-structu" class="xref">Parameters and data structures</a><a href="#section-toc.1-1.2.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.3.2.2">
                    <p id="section-toc.1-1.2.2.3.2.2.1"><a href="#section-2.3.2" class="xref">2.3.2</a>.  <a href="#name-registration" class="xref">Registration</a><a href="#section-toc.1-1.2.2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.3.2.3">
                    <p id="section-toc.1-1.2.2.3.2.3.1"><a href="#section-2.3.3" class="xref">2.3.3</a>.  <a href="#name-discovery" class="xref">Discovery</a><a href="#section-toc.1-1.2.2.3.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.3.2.4">
                    <p id="section-toc.1-1.2.2.3.2.4.1"><a href="#section-2.3.4" class="xref">2.3.4</a>.  <a href="#name-negotiation" class="xref">Negotiation</a><a href="#section-toc.1-1.2.2.3.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.3.2.5">
                    <p id="section-toc.1-1.2.2.3.2.5.1"><a href="#section-2.3.5" class="xref">2.3.5</a>.  <a href="#name-synchronization-and-floodin" class="xref">Synchronization and Flooding</a><a href="#section-toc.1-1.2.2.3.2.5.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.3.2.6">
                    <p id="section-toc.1-1.2.2.3.2.6.1"><a href="#section-2.3.6" class="xref">2.3.6</a>.  <a href="#name-invalid-message-function" class="xref">Invalid Message Function</a><a href="#section-toc.1-1.2.2.3.2.6.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-implementation-status-rfc-e" class="xref">Implementation Status [RFC Editor: please remove]</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.7.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.7.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-appendix.a" class="xref">Appendix A</a>.  <a href="#name-error-codes" class="xref">Error Codes</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-appendix.b" class="xref">Appendix B</a>.  <a href="#name-change-log-rfc-editor-pleas" class="xref">Change log [RFC Editor: Please remove]</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-appendix.c" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
</li>
</ul>
</nav>
</section>
</div>
<div id="intro">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">As defined in <span>[<a href="#I-D.ietf-anima-reference-model" class="xref">I-D.ietf-anima-reference-model</a>]</span>, the
      Autonomic Service Agent (ASA)
      is the atomic entity of an autonomic function, and it is instantiated
      on autonomic nodes. When ASAs communicate with each other, they should
      use the Generic Autonomic Signaling Protocol (GRASP) <span>[<a href="#I-D.ietf-anima-grasp" class="xref">I-D.ietf-anima-grasp</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">As the following figure shows, a GRASP implementation could contain two major
      sub-layers. The bottom is the GRASP base protocol module, which is only
      responsible for sending and receiving GRASP messages and maintaining
      shared data structures. The upper layer contains
      some extended functions based upon GRASP basic protocol. For example,
      <span>[<a href="#I-D.liu-anima-grasp-distribution" class="xref">I-D.liu-anima-grasp-distribution</a>]</span> describes a possible extended
      function.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">It is desirable that ASAs can be designed as portable user-space programs
      using a portable API. In many operating systems, the GRASP module will therefore
      be split into two layers. The top layer is a library that provides the API.
      The lower layer is a daemon that contains GRASP core functions that are
      independent of specific ASAs, such as multicast handling and relaying, and
      common data structures such as the discovery cache. The GRASP API 
      library would need to communicate with the GRASP core via an inter-process
      communication (IPC) mechanism. The details of this are system-dependent.<a href="#section-1-3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignCenter" id="section-1-4">
<pre>+----+                              +----+
|ASAs|                              |ASAs|
+----+                              +----+
   |                                   |
   | GRASP Function API                |
   |                                   |
+------------------+                   |GRASP API
| GRASP Extended   |                   |
| Function Modules |                   |
+------------------+                   |
+------------------------------------------+
|                   GRASP API Library      |
|  GRASP Modules - - - - - - - - - - - - - |
|                   GRASP Core (Daemon)    |
+------------------------------------------+
</pre><a href="#section-1-4" class="pilcrow">¶</a>
</div>
<p id="section-1-5">Both the GRASP library and the extended function modules should
      be available to the ASAs. Thus, there need to be two sub-sets of API.
      However, since the extended functions are expected to be added in an incremental
      manner, it is inappropriate to define all the function APIs in a single
      document. This document only describes the basic GRASP API.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">Note that a very simple autonomic node might contain only a single ASA in
      addition to the autonomic infrastructure components described in
      <span>[<a href="#I-D.ietf-anima-bootstrapping-keyinfra" class="xref">I-D.ietf-anima-bootstrapping-keyinfra</a>]</span>
      and <span>[<a href="#I-D.ietf-anima-autonomic-control-plane" class="xref">I-D.ietf-anima-autonomic-control-plane</a>]</span>. Such a node might
      directly integrate GRASP in its autonomic code and therefore not
      require this API to be installed.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">This document gives a conceptual outline of the API. It is not a formal
      specification for any particular programming language or operating system,
      and it is expected that details will be clarified in individual implementations.<a href="#section-1-7" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-2">
      <h2 id="name-grasp-api-for-asa">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-grasp-api-for-asa" class="section-name selfRef">GRASP API for ASA</a>
      </h2>
<section id="section-2.1">
        <h3 id="name-design-principles">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-design-principles" class="section-name selfRef">Design Principles</a>
        </h3>
<p id="section-2.1-1">The assumption of this document is that any Autonomic Service Agent
        (ASA) needs to call a GRASP module that handles protocol details
        (security, sending and listening for GRASP messages, waiting, caching
        discovery results, negotiation looping, sending and receiving
        sychronization data, etc.) but understands nothing about individual
        objectives. The semantics of objectives are unknown to the GRASP
        module and are handled only by the ASAs. Thus, this is a high level
        abstract API for use by ASAs. Individual 
        language bindings should be defined in separate documents.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">An assumption of this API is that ASAs may fall into various classes:<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.1-3.1">ASAs that only use GRASP for discovery purposes.<a href="#section-2.1-3.1" class="pilcrow">¶</a>
</li>
<li id="section-2.1-3.2">ASAs that use GRASP negotiation but only as an initiator (client).<a href="#section-2.1-3.2" class="pilcrow">¶</a>
</li>
<li id="section-2.1-3.3">ASAs that use GRASP negotiation but only as a responder.<a href="#section-2.1-3.3" class="pilcrow">¶</a>
</li>
<li id="section-2.1-3.4">ASAs that use GRASP negotiation as an initiator or responder.<a href="#section-2.1-3.4" class="pilcrow">¶</a>
</li>
<li id="section-2.1-3.5">ASAs that use GRASP synchronization but only as an initiator (recipient).<a href="#section-2.1-3.5" class="pilcrow">¶</a>
</li>
<li id="section-2.1-3.6">ASAs that use GRASP synchronization but only as a responder and/or flooder.<a href="#section-2.1-3.6" class="pilcrow">¶</a>
</li>
<li id="section-2.1-3.7">ASAs that use GRASP synchronization as an initiator, responder and/or flooder.<a href="#section-2.1-3.7" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-2.1-4">
        The API also assumes that one ASA may support multiple objectives. Nothing prevents
        an ASA from supporting some objectives for synchronization and others for negotiation.<a href="#section-2.1-4" class="pilcrow">¶</a></p>
<p id="section-2.1-5">The API design assumes that the operating system and programming language
        provide a mechanism for simultaneous asynchronous operations. This is discussed
        in detail in <a href="#asynchop" class="xref">Section 2.2</a>.<a href="#section-2.1-5" class="pilcrow">¶</a></p>
<p id="section-2.1-6">The functions provided by the API do not map one-to-one onto GRASP messages. Rather,
        they are intended to offer convenient support for message sequences (such as a discovery
        request followed by responses from several peers,
        or a negotiation request followed by various possible responses).<a href="#section-2.1-6" class="pilcrow">¶</a></p>
<p id="section-2.1-7">A few items are out of scope in this version, since practical experience is required before including them:<a href="#section-2.1-7" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.1-8.1">Authorization of ASAs is out of scope.<a href="#section-2.1-8.1" class="pilcrow">¶</a>
</li>
<li id="section-2.1-8.2">User-supplied explicit locators for an objective are not supported.<a href="#section-2.1-8.2" class="pilcrow">¶</a>
</li>
<li id="section-2.1-8.3">The Rapid mode of GRASP is not supported.<a href="#section-2.1-8.3" class="pilcrow">¶</a>
</li>
</ul>
</section>
<div id="asynchop">
<section id="section-2.2">
        <h3 id="name-asynchronous-operations">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-asynchronous-operations" class="section-name selfRef">Asynchronous Operations</a>
        </h3>
<p id="section-2.2-1">GRASP includes asynchronous operations and wait states, and its messages
    are not idempotent, i.e. they may cause incremental changes of state
    in the recipient ASA. Most ASAs will
    need to support several simultaneous operations; for example an ASA might need
    to negotiate one objective with a peer while discovering and synchronizing
    a different objective with a different peer. Alternatively, an ASA which
    acts as a resource manager might need to run simultaneous negotiations
    for a given objective with multiple different peers. Such an ASA must support
    atomic access to its internal data structures, for example using operating
    system locks.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">Thus, both the GRASP
    core and most ASAs need to support asynchronous operations. Depending on both the
    operating system and the programming language in use, there are three main
    techniques for such parallel operations: multi-threading, an
    event loop structure using polling, and an event loop structure using
    callback functions.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.2-3">
          <li id="section-2.2-3.1">In multi-threading, the operating system and language will provide
    the necessary support for asynchronous operations, including creation
    of new threads, context switching between threads, queues, locks,
    and implicit wait states. In this case,
    all API calls can be treated naturally as synchronous, even if they include
    wait states, blocking and queueing. Simultaneous operations will each run
    in their own threads. For example, the discover() call may not return
    until discovery results have arrived or a timeout has occurred. If the ASA
    has other work to do, the discover() call must be in a thread of its own.<a href="#section-2.2-3.1" class="pilcrow">¶</a>
</li>
<li id="section-2.2-3.2">In an event loop implementation with polling, blocking calls
    are not acceptable. Therefore all calls must be non-blocking, and
    the main loop could support multiple GRASP sessions in parallel
    by repeatedly polling each one for a change of state. To facilitate this, the
    API implementation would provide non-blocking versions of all the functions that
    otherwise involve blocking and queueing. In these calls, a 'noReply' code
    will be returned by each call instead of blocking, until such time as the event
    for which it is waiting (or a failure) has occurred. Thus, for example, discover()
    would return 'noReply' instead of waiting until discovery has succeeded
    or timed out. The discover() call would be repeated in every cycle of the
    main loop until it completes. Effectively, it becomes a polling call.<a href="#section-2.2-3.2" class="pilcrow">¶</a>
</li>
<li id="section-2.2-3.3">In an event loop implementation with callbacks, the ASA programmer would
    provide a callback function for each asynchronous operation, e.g. discovery_received().
    This would be called asynchronously when a reply is received or a failure such as a
    timeout occurs.<a href="#section-2.2-3.3" class="pilcrow">¶</a>
</li>
</ol>
<p id="section-2.2-4">The following calls involve waiting for a remote operation, so they could
    use a polling or callback mechanism. In a threaded mechanism, they will usually
    require to be called in a separate thread:<a href="#section-2.2-4" class="pilcrow">¶</a></p>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-2.2-5.1">discover()
    whose callback would be discovery_received().<a href="#section-2.2-5.1" class="pilcrow">¶</a>
</li>
<li class="ulEmpty" id="section-2.2-5.2">request_negotiate()
    whose callback would be negotiate_step_received().<a href="#section-2.2-5.2" class="pilcrow">¶</a>
</li>
<li class="ulEmpty" id="section-2.2-5.3">negotiate_step()
    whose callback would be negotiate_step_received().<a href="#section-2.2-5.3" class="pilcrow">¶</a>
</li>
<li class="ulEmpty" id="section-2.2-5.4">listen_negotiate()
    whose callback would be negotiate_step_received().<a href="#section-2.2-5.4" class="pilcrow">¶</a>
</li>
<li class="ulEmpty" id="section-2.2-5.5">synchronize()
    whose callback would be synchronization_received().<a href="#section-2.2-5.5" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-2.2-6">There is nothing in the design of GRASP to prevent the following scenario. Consider
    an ASA "A" that acts as a resource allocator for some objective. An ASA "B" launches
    a negotiation with "A" to obtain or release a quantity of the resource. While this negotatition
    is under way, "B" chooses to launch a second simultaneous negotiation with "A" for a different
    quantity of the same resource. "A" must therefore conduct two separate negotiation sessions
    at the same time with the same peer, and must not mix them up.<a href="#section-2.2-6" class="pilcrow">¶</a></p>
<p id="section-2.2-7">Note that ASAs could be designed to avoid such a scenario, i.e. restricted to exactly one
    negotiation session at a time for a given objective, but this would be a voluntary
    restriction not required by the GRASP protocol. In fact it is an assumption of GRASP
    that an ASA managing a resource may need to conduct multiple parallel negotiations,
    possibly with the same peer. Therefore, the API design allows for such scenarios.<a href="#section-2.2-7" class="pilcrow">¶</a></p>
<p id="section-2.2-8">In the callback model, for the scenario just described,
    the ASAs "A" and "B" will each provide two instances of negotiate_step_received(), one for
    each session. For this reason, each ASA must be
    able to distinguish the two sessions, and the peer's IP address is not sufficient for this.
    It is also not safe to rely on transport port numbers for this, since future variants of GRASP
    might use shared ports rather than a separate port per session. This is why the GRASP design
    includes a session identifier. Thus, when necessary, a 'session_nonce' parameter is
    used in the API to distinguish simultaneous GRASP sessions from each other, so that any
    number of sessions may proceed asynchronously in parallel.<a href="#section-2.2-8" class="pilcrow">¶</a></p>
<p id="section-2.2-9">
    In calls where it is used, the 'session_nonce' is an opaque read/write parameter. On
    the first call, it is set to a null value, and the API returns a non-null 'session_nonce'
    value based on the GRASP session identifier. This value must be used in all subsequent
    calls for the same session, and will be provided as a parameter in the callback functions. By this
    mechanism, multiple overlapping sessions can be distinguished, both in the ASA
    and in the GRASP core. The value of the 'session_nonce" is opaque to the ASA.<a href="#section-2.2-9" class="pilcrow">¶</a></p>
<p id="section-2.2-10">An additional mechanism that might increase efficiency for polling
    implementations is to add a general call, say notify(), which would check the
    status of all outstanding operations for the calling ASA and return the session_nonce values
    for all sessions that have changed state. This would eliminate the need for repeated calls
    to the individual functions returning a 'noReply'. This call is not described below
    as the details are likely to be implementation-specific.<a href="#section-2.2-10" class="pilcrow">¶</a></p>
<p id="section-2.2-11">An implication of the above for all GRASP implementations is that the GRASP core
    must keep state for each GRASP operation in progress, most likely keyed by the GRASP
    Session ID and the GRASP source address of the session initiator. Even in a threaded
    implementation, the GRASP core will need such state internally. The session_nonce
    parameter exposes this aspect of the implementation.<a href="#section-2.2-11" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-2.3">
        <h3 id="name-api-definition">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-api-definition" class="section-name selfRef">API definition</a>
        </h3>
<section id="section-2.3.1">
          <h4 id="name-parameters-and-data-structu">
<a href="#section-2.3.1" class="section-number selfRef">2.3.1. </a><a href="#name-parameters-and-data-structu" class="section-name selfRef">Parameters and data structures</a>
          </h4>
<p id="section-2.3.1-1">This section describes parameters and data structures used in multiple API calls.<a href="#section-2.3.1-1" class="pilcrow">¶</a></p>
<section id="section-2.3.1.1">
            <h5 id="name-errorcode">
<a href="#section-2.3.1.1" class="section-number selfRef">2.3.1.1. </a><a href="#name-errorcode" class="section-name selfRef">Errorcode</a>
            </h5>
<p id="section-2.3.1.1-1">All functions in the API have an unsigned 'errorcode' integer as their return value (the first returned value
       in languages that allow multiple returned parameters). An errorcode of zero indicates success.
       Any other value indicates failure of some kind. The first three errorcodes have special importance:<a href="#section-2.3.1.1-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.3.1.1-2">
              <li id="section-2.3.1.1-2.1">Declined: used to indicate that the other end has sent a GRASP Negotiation End message (M_END) with a Decline option (O_DECLINE).<a href="#section-2.3.1.1-2.1" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.1-2.2">No reply: used in non-blocking calls to indicate that the other end has sent no reply so far (see <a href="#asynchop" class="xref">Section 2.2</a>).<a href="#section-2.3.1.1-2.2" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.1-2.3">Unspecified error: used when no more specific error code applies.<a href="#section-2.3.1.1-2.3" class="pilcrow">¶</a>
</li>
</ol>
<p id="section-2.3.1.1-3"><a href="#ErrAppx" class="xref">Appendix A</a> gives a full list of currently suggested error codes, based on
       implementation experience. While there is no absolute requirement for all implementations
       to use the same error codes, this is highly recommended for portability of applications.<a href="#section-2.3.1.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.1.2">
            <h5 id="name-timeout">
<a href="#section-2.3.1.2" class="section-number selfRef">2.3.1.2. </a><a href="#name-timeout" class="section-name selfRef">Timeout</a>
            </h5>
<p id="section-2.3.1.2-1">Wherever a 'timeout' parameter appears, it is an integer expressed
       in milliseconds. If it is zero, the GRASP default timeout (GRASP_DEF_TIMEOUT,
       see <span>[<a href="#I-D.ietf-anima-grasp" class="xref">I-D.ietf-anima-grasp</a>]</span>) will apply. If no response
       is received before the timeout expires, the call will fail unless otherwise noted.<a href="#section-2.3.1.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.1.3">
            <h5 id="name-objective">
<a href="#section-2.3.1.3" class="section-number selfRef">2.3.1.3. </a><a href="#name-objective" class="section-name selfRef">Objective</a>
            </h5>
<p id="section-2.3.1.3-1">An 'objective' parameter is a data structure with the following components:<a href="#section-2.3.1.3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.1.3-2.1">name (UTF-8 string) - the objective's name<a href="#section-2.3.1.3-2.1" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.3-2.2">neg (Boolean flag) - True if objective supports negotiation (default False)<a href="#section-2.3.1.3-2.2" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.3-2.3">synch (Boolean flag) - True if objective supports synchronization (default False)<a href="#section-2.3.1.3-2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.3-2.4">
                <p id="section-2.3.1.3-2.4.1">dry (Boolean flag) - True if objective supports dry-run negotiation (default False)<a href="#section-2.3.1.3-2.4.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.1.3-2.4.2.1">Note 1: All objectives are assumed to support discovery, so there is no Boolean for that.<a href="#section-2.3.1.3-2.4.2.1" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.3-2.4.2.2">Note 2: Only one of 'synch' or 'neg' may be True.<a href="#section-2.3.1.3-2.4.2.2" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.3-2.4.2.3">Note 3: 'dry' must not be True unless 'neg' is also True.<a href="#section-2.3.1.3-2.4.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.3-2.4.2.4">Note 4: In a language such as C the preferred implementation may be to represent the Boolean flags as bits in a single byte.<a href="#section-2.3.1.3-2.4.2.4" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.1.3-2.5">loop_count (integer) - Limit on negotiation steps etc. (default GRASP_DEF_LOOPCT,
        see <span>[<a href="#I-D.ietf-anima-grasp" class="xref">I-D.ietf-anima-grasp</a>]</span>)<a href="#section-2.3.1.3-2.5" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.3-2.6">
                <p id="section-2.3.1.3-2.6.1">value - a specific data structure expressing the value of the objective. The format is 
           language dependent, with the constraint that it can be validly represented in CBOR (default integer = 0).<a href="#section-2.3.1.3-2.6.1" class="pilcrow">¶</a></p>
<p id="section-2.3.1.3-2.6.2">
           An essential requirement for all language mappings and all implementations is that, regardless
           of what other options exist for a language-specific represenation of the value, there is
           always an option to use a CBOR byte string as the value. The API will then wrap this
           byte string in CBOR Tag 24 for transmission via GRASP, and unwrap it after reception.<a href="#section-2.3.1.3-2.6.2" class="pilcrow">¶</a></p>
<p id="section-2.3.1.3-2.6.3">
           An example data structure definition for an objective in the C language,
           assuming the use of a particular CBOR library, is:<a href="#section-2.3.1.3-2.6.3" class="pilcrow">¶</a></p>
<div class="artwork art-text alignCenter" id="section-2.3.1.3-2.6.4">
<pre>
 typedef struct {
    char *name;
    uint8_t flags;            // flag bits as defined by GRASP
    int loop_count;
    int value_size;           // size of value in bytes
    cbor_mutable_data cbor_value;
                              // CBOR bytestring (libcbor/cbor/data.h)
    } objective;
</pre><a href="#section-2.3.1.3-2.6.4" class="pilcrow">¶</a>
</div>
<p id="section-2.3.1.3-2.6.5">
           An example data structure definition for an objective in the Python language is:<a href="#section-2.3.1.3-2.6.5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignCenter" id="section-2.3.1.3-2.6.6">
<pre>
 class objective:
    """A GRASP objective"""
    def __init__(self, name):
        self.name = name    # Unique name (string)
        self.negotiate = False   # True if objective supports negotiation
        self.dryrun = False      # True if objective supports dry-run neg.
        self.synch = False  # True if objective supports synch
        self.loop_count = GRASP_DEF_LOOPCT  # Default starting value
        self.value = 0      # Place holder; any valid Python object
</pre><a href="#section-2.3.1.3-2.6.6" class="pilcrow">¶</a>
</div>
</li>
</ul>
</section>
<div id="asaL">
<section id="section-2.3.1.4">
            <h5 id="name-asa_locator">
<a href="#section-2.3.1.4" class="section-number selfRef">2.3.1.4. </a><a href="#name-asa_locator" class="section-name selfRef">ASA_locator</a>
            </h5>
<p id="section-2.3.1.4-1">An 'ASA_locator' parameter is a data structure with the following contents:<a href="#section-2.3.1.4-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.1.4-2.1">locator - The actual locator, either an IP address or an ASCII string.<a href="#section-2.3.1.4-2.1" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.4-2.2">ifi (integer) - The interface identifier index via which this was discovered - probably no use to a normal ASA<a href="#section-2.3.1.4-2.2" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.4-2.3">expire (system dependent type) - The time on the local system clock when this locator will expire from the cache<a href="#section-2.3.1.4-2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.4-2.4">is_ipaddress (Boolean) - True if the locator is an IP address<a href="#section-2.3.1.4-2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.4-2.5">is_fqdn (Boolean) - True if the locator is an FQDN<a href="#section-2.3.1.4-2.5" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.4-2.6">is_uri (Boolean) - True if the locator is a URI<a href="#section-2.3.1.4-2.6" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.4-2.7">diverted (Boolean) - True if the locator was discovered via a Divert option<a href="#section-2.3.1.4-2.7" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.4-2.8">protocol (integer) - Applicable transport protocol (IPPROTO_TCP or IPPROTO_UDP)<a href="#section-2.3.1.4-2.8" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.4-2.9">port (integer) - Applicable port number<a href="#section-2.3.1.4-2.9" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<section id="section-2.3.1.5">
            <h5 id="name-tagged_objective">
<a href="#section-2.3.1.5" class="section-number selfRef">2.3.1.5. </a><a href="#name-tagged_objective" class="section-name selfRef">Tagged_objective</a>
            </h5>
<p id="section-2.3.1.5-1">A 'tagged_objective' parameter is a data structure with the following contents:<a href="#section-2.3.1.5-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.1.5-2.1">objective - An objective<a href="#section-2.3.1.5-2.1" class="pilcrow">¶</a>
</li>
<li id="section-2.3.1.5-2.2">locator - The ASA_locator associated with the objective, or a null value.<a href="#section-2.3.1.5-2.2" class="pilcrow">¶</a>
</li>
</ul>
</section>
<section id="section-2.3.1.6">
            <h5 id="name-asa_nonce">
<a href="#section-2.3.1.6" class="section-number selfRef">2.3.1.6. </a><a href="#name-asa_nonce" class="section-name selfRef">Asa_nonce</a>
            </h5>
<p id="section-2.3.1.6-1">Although an authentication and authorization scheme for ASAs has not been defined, the API
       provides a very simple hook for such a scheme. When an ASA starts up, it registers itself
       with the GRASP core, which provides it with an opaque nonce that, although not cryptographically
       protected, would be difficult for a third party to predict. The ASA must present this nonce
       in future calls. This mechanism will prevent some elementary errors or trivial attacks
       such as an ASA manipulating an objective it has not registered to use.<a href="#section-2.3.1.6-1" class="pilcrow">¶</a></p>
<p id="section-2.3.1.6-2">Thus, in most calls, an 'asa_nonce' parameter is required. It is generated when an ASA
       first registers with GRASP, and the ASA must then store the asa_nonce
       and use it in every subsequent GRASP call. Any call in which an invalid nonce is presented will fail.
       It is an up to 32-bit opaque value (for example represented as a uint32_t, depending on the language).
       It should be unpredictable; a possible implementation is to use the same mechanism that GRASP
       uses to generate Session IDs <span>[<a href="#I-D.ietf-anima-grasp" class="xref">I-D.ietf-anima-grasp</a>]</span>. Another possible
       implementation is to hash the name of the ASA with a locally defined secret key.<a href="#section-2.3.1.6-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.1.7">
            <h5 id="name-session_nonce">
<a href="#section-2.3.1.7" class="section-number selfRef">2.3.1.7. </a><a href="#name-session_nonce" class="section-name selfRef">Session_nonce</a>
            </h5>
<p id="section-2.3.1.7-1">In some calls, a 'session_nonce' parameter is required. This is an opaque data
       structure as far as the ASA is concerned,
       used to identify calls to the API as belonging to a specific GRASP session (see <a href="#asynchop" class="xref">Section 2.2</a>).
       In fully threaded implementations this parameter might not be needed, but it is included to
       act as a session handle if necessary. It will also allow GRASP to detect and ignore
       malicious calls or calls from timed-out sessions. A possible implementation is to form the
       nonce from the underlying GRASP Session ID and the source address of the session.<a href="#section-2.3.1.7-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.3.2">
          <h4 id="name-registration">
<a href="#section-2.3.2" class="section-number selfRef">2.3.2. </a><a href="#name-registration" class="section-name selfRef">Registration</a>
          </h4>
<p id="section-2.3.2-1">These functions are used to register an ASA and the objectives that it supports with
        the GRASP module. If an authorization model is added to GRASP, it would also be added 
        at this point in the API.<a href="#section-2.3.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.2-2.1">
              <p id="section-2.3.2-2.1.1">register_asa()<a href="#section-2.3.2-2.1.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.2-2.1.2.1">
                  <p id="section-2.3.2-2.1.2.1.1">Input parameter:<a href="#section-2.3.2-2.1.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.2-2.1.2.1.2">
                    <dt id="section-2.3.2-2.1.2.1.2.1"></dt>
<dd id="section-2.3.2-2.1.2.1.2.2">name of the ASA (UTF-8 string)<a href="#section-2.3.2-2.1.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.2-2.1.2.2">
                  <p id="section-2.3.2-2.1.2.2.1">Return parameters:<a href="#section-2.3.2-2.1.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.2-2.1.2.2.2">
                    <dt id="section-2.3.2-2.1.2.2.2.1"></dt>
<dd id="section-2.3.2-2.1.2.2.2.2">errorcode (integer)<a href="#section-2.3.2-2.1.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.2-2.1.2.2.2.3"></dt>
<dd id="section-2.3.2-2.1.2.2.2.4">asa_nonce (integer) (if successful)<a href="#section-2.3.2-2.1.2.2.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.2-2.1.2.3">This initialises state in the GRASP module for the calling entity (the ASA).
               In the case of success, an 'asa_nonce' is returned which the ASA must present in
               all subsequent calls. 
               In the case of failure, the ASA has not been authorized and cannot operate.<a href="#section-2.3.2-2.1.2.3" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.2-2.2">
              <p id="section-2.3.2-2.2.1">deregister_asa()<a href="#section-2.3.2-2.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.2-2.2.2.1">
                  <p id="section-2.3.2-2.2.2.1.1">Input parameters:<a href="#section-2.3.2-2.2.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.2-2.2.2.1.2">
                    <dt id="section-2.3.2-2.2.2.1.2.1"></dt>
<dd id="section-2.3.2-2.2.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.2-2.2.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.2-2.2.2.1.2.3"></dt>
<dd id="section-2.3.2-2.2.2.1.2.4">name of the ASA (UTF-8 string)<a href="#section-2.3.2-2.2.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.2-2.2.2.2">
                  <p id="section-2.3.2-2.2.2.2.1">Return parameter:<a href="#section-2.3.2-2.2.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.2-2.2.2.2.2">
                    <dt id="section-2.3.2-2.2.2.2.2.1"></dt>
<dd id="section-2.3.2-2.2.2.2.2.2">errorcode (integer)<a href="#section-2.3.2-2.2.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.2-2.2.2.3">This removes all state in the GRASP module for the calling entity (the ASA),
             and deregisters any objectives it has registered. Note that these actions must
             also happen automatically if an ASA crashes.<a href="#section-2.3.2-2.2.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.2-2.2.2.4">Note - the ASA name is strictly speaking redundant in this call, but is present for clarity.<a href="#section-2.3.2-2.2.2.4" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.2-2.3">
              <p id="section-2.3.2-2.3.1">register_objective()<a href="#section-2.3.2-2.3.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.2-2.3.2.1">
                  <p id="section-2.3.2-2.3.2.1.1">Input parameters:<a href="#section-2.3.2-2.3.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.2-2.3.2.1.2">
                    <dt id="section-2.3.2-2.3.2.1.2.1"></dt>
<dd id="section-2.3.2-2.3.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.2-2.3.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.2-2.3.2.1.2.3"></dt>
<dd id="section-2.3.2-2.3.2.1.2.4">objective (structure)<a href="#section-2.3.2-2.3.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.2-2.3.2.1.2.5"></dt>
<dd id="section-2.3.2-2.3.2.1.2.6">ttl (integer - default GRASP_DEF_TIMEOUT)<a href="#section-2.3.2-2.3.2.1.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.2-2.3.2.1.2.7"></dt>
<dd id="section-2.3.2-2.3.2.1.2.8">discoverable (Boolean - default False)<a href="#section-2.3.2-2.3.2.1.2.8" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.2-2.3.2.1.2.9"></dt>
<dd id="section-2.3.2-2.3.2.1.2.10">overlap (Boolean - default False)<a href="#section-2.3.2-2.3.2.1.2.10" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.2-2.3.2.1.2.11"></dt>
<dd id="section-2.3.2-2.3.2.1.2.12">local (Boolean - default False)<a href="#section-2.3.2-2.3.2.1.2.12" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.2-2.3.2.2">
                  <p id="section-2.3.2-2.3.2.2.1">Return parameter:<a href="#section-2.3.2-2.3.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.2-2.3.2.2.2">
                    <dt id="section-2.3.2-2.3.2.2.2.1"></dt>
<dd id="section-2.3.2-2.3.2.2.2.2">errorcode (integer)<a href="#section-2.3.2-2.3.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.2-2.3.2.3">This registers an objective that this ASA supports and may modify.
                The 'objective' becomes a candidate for discovery. However, discovery
                responses should not be enabled until the ASA calls listen_negotiate() or
                listen_synchronize(), showing that it is able to act as a responder.
                The ASA may negotiate the objective or send synchronization or flood data.
                Registration is not needed if the ASA only wants to receive synchronization
                or flood data for the objective concerned.<a href="#section-2.3.2-2.3.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.2-2.3.2.4">The 'ttl' parameter is the valid lifetime (time to live) in milliseconds of any
                discovery response for this objective. The default value should be the GRASP
                default timeout (GRASP_DEF_TIMEOUT, see <span>[<a href="#I-D.ietf-anima-grasp" class="xref">I-D.ietf-anima-grasp</a>]</span>).<a href="#section-2.3.2-2.3.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.2-2.3.2.5">If the parameter 'discoverable' is True, the objective
                is immediately discoverable. This is
                intended for objectives that are only defined for GRASP discovery,
                and which do not support negotiation or synchronization.<a href="#section-2.3.2-2.3.2.5" class="pilcrow">¶</a>
</li>
<li id="section-2.3.2-2.3.2.6">If the parameter 'overlap' is True, more than one ASA may register this objective
                in the same GRASP instance.<a href="#section-2.3.2-2.3.2.6" class="pilcrow">¶</a>
</li>
<li id="section-2.3.2-2.3.2.7">If the parameter 'local' is True, discovery must return a link-local address.
                This feature is for objectives that must be restricted to the local link.<a href="#section-2.3.2-2.3.2.7" class="pilcrow">¶</a>
</li>
<li id="section-2.3.2-2.3.2.8">This call may be repeated for multiple objectives.<a href="#section-2.3.2-2.3.2.8" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.2-2.4">
              <p id="section-2.3.2-2.4.1">deregister_objective()<a href="#section-2.3.2-2.4.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.2-2.4.2.1">
                  <p id="section-2.3.2-2.4.2.1.1">Input parameters:<a href="#section-2.3.2-2.4.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.2-2.4.2.1.2">
                    <dt id="section-2.3.2-2.4.2.1.2.1"></dt>
<dd id="section-2.3.2-2.4.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.2-2.4.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.2-2.4.2.1.2.3"></dt>
<dd id="section-2.3.2-2.4.2.1.2.4">objective (structure)<a href="#section-2.3.2-2.4.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.2-2.4.2.2">
                  <p id="section-2.3.2-2.4.2.2.1">Return parameter:<a href="#section-2.3.2-2.4.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.2-2.4.2.2.2">
                    <dt id="section-2.3.2-2.4.2.2.2.1"></dt>
<dd id="section-2.3.2-2.4.2.2.2.2">errorcode (integer)<a href="#section-2.3.2-2.4.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.2-2.4.2.3">The 'objective' must have been registered by the calling ASA; if not, this call fails. 
             Otherwise, it removes all state in the GRASP module for the given objective.<a href="#section-2.3.2-2.4.2.3" class="pilcrow">¶</a>
</li>
</ul>
</li>
</ul>
</section>
<section id="section-2.3.3">
          <h4 id="name-discovery">
<a href="#section-2.3.3" class="section-number selfRef">2.3.3. </a><a href="#name-discovery" class="section-name selfRef">Discovery</a>
          </h4>
<ul>
<li id="section-2.3.3-1.1">
              <p id="section-2.3.3-1.1.1">discover()<a href="#section-2.3.3-1.1.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.3-1.1.2.1">
                  <p id="section-2.3.3-1.1.2.1.1">Input parameters:<a href="#section-2.3.3-1.1.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.3-1.1.2.1.2">
                    <dt id="section-2.3.3-1.1.2.1.2.1"></dt>
<dd id="section-2.3.3-1.1.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.3-1.1.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.3-1.1.2.1.2.3"></dt>
<dd id="section-2.3.3-1.1.2.1.2.4">objective (structure)<a href="#section-2.3.3-1.1.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.3-1.1.2.1.2.5"></dt>
<dd id="section-2.3.3-1.1.2.1.2.6">timeout (integer)<a href="#section-2.3.3-1.1.2.1.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.3-1.1.2.1.2.7"></dt>
<dd id="section-2.3.3-1.1.2.1.2.8">age_limit (integer)<a href="#section-2.3.3-1.1.2.1.2.8" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.3-1.1.2.2">
                  <p id="section-2.3.3-1.1.2.2.1">Return parameters:<a href="#section-2.3.3-1.1.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.3-1.1.2.2.2">
                    <dt id="section-2.3.3-1.1.2.2.2.1"></dt>
<dd id="section-2.3.3-1.1.2.2.2.2">errorcode (integer)<a href="#section-2.3.3-1.1.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.3-1.1.2.2.2.3"></dt>
<dd id="section-2.3.3-1.1.2.2.2.4">locator_list (structure)<a href="#section-2.3.3-1.1.2.2.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.3-1.1.2.3">This returns a list of discovered 'ASA_locator's for the given objective.
             Note that this structure includes all the fields described in <a href="#asaL" class="xref">Section 2.3.1.4</a>.<a href="#section-2.3.3-1.1.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.3-1.1.2.4">If the parameter 'age_limit' is greater than zero, any locally cached locators for the
             objective whose remaining lifetime in milliseconds is less than or equal to 'age_limit'
             are deleted first. Thus 'age_limit' = 0 will flush all entries.<a href="#section-2.3.3-1.1.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.3-1.1.2.5">If the parameter 'timeout' is zero, any remaining locally cached locators for the
             objective are returned immediately and no other action is taken. (Thus,
             a call with 'age_limit' and 'timeout' both equal to zero is pointless.)<a href="#section-2.3.3-1.1.2.5" class="pilcrow">¶</a>
</li>
<li id="section-2.3.3-1.1.2.6">If the parameter 'timeout' is greater than zero,
             GRASP discovery is performed, and all results obtained before the timeout in milliseconds
             expires are returned. If no results are obtained, an empty list is returned after the timeout.
             That is not an error condition.<a href="#section-2.3.3-1.1.2.6" class="pilcrow">¶</a>
</li>
<li id="section-2.3.3-1.1.2.7">Threaded implementation: This should be called in a separate thread if asynchronous operation is required.<a href="#section-2.3.3-1.1.2.7" class="pilcrow">¶</a>
</li>
<li id="section-2.3.3-1.1.2.8">Event loop implementation: An additional read/write 'session_nonce' parameter is used.
             A callback may be used in the case of a non-zero tiemout.<a href="#section-2.3.3-1.1.2.8" class="pilcrow">¶</a>
</li>
</ul>
</li>
</ul>
</section>
<section id="section-2.3.4">
          <h4 id="name-negotiation">
<a href="#section-2.3.4" class="section-number selfRef">2.3.4. </a><a href="#name-negotiation" class="section-name selfRef">Negotiation</a>
          </h4>
<ul>
<li id="section-2.3.4-1.1">
              <p id="section-2.3.4-1.1.1">request_negotiate()<a href="#section-2.3.4-1.1.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.4-1.1.2.1">
                  <p id="section-2.3.4-1.1.2.1.1">Input parameters:<a href="#section-2.3.4-1.1.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.1.2.1.2">
                    <dt id="section-2.3.4-1.1.2.1.2.1"></dt>
<dd id="section-2.3.4-1.1.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.4-1.1.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.1.2.1.2.3"></dt>
<dd id="section-2.3.4-1.1.2.1.2.4">objective (structure)<a href="#section-2.3.4-1.1.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.1.2.1.2.5"></dt>
<dd id="section-2.3.4-1.1.2.1.2.6">peer (ASA_locator)<a href="#section-2.3.4-1.1.2.1.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.1.2.1.2.7"></dt>
<dd id="section-2.3.4-1.1.2.1.2.8">timeout (integer)<a href="#section-2.3.4-1.1.2.1.2.8" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.1.2.2">
                  <p id="section-2.3.4-1.1.2.2.1">Return parameters:<a href="#section-2.3.4-1.1.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.1.2.2.2">
                    <dt id="section-2.3.4-1.1.2.2.2.1"></dt>
<dd id="section-2.3.4-1.1.2.2.2.2">errorcode (integer)<a href="#section-2.3.4-1.1.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.1.2.2.2.3"></dt>
<dd id="section-2.3.4-1.1.2.2.2.4">session_nonce (structure) (if successful)<a href="#section-2.3.4-1.1.2.2.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.1.2.2.2.5"></dt>
<dd id="section-2.3.4-1.1.2.2.2.6">proffered_objective (structure) (if successful)<a href="#section-2.3.4-1.1.2.2.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.1.2.2.2.7"></dt>
<dd id="section-2.3.4-1.1.2.2.2.8">reason (string) (if negotiation declined)<a href="#section-2.3.4-1.1.2.2.2.8" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.1.2.3">This function opens a negotiation session. The 'objective' parameter must
             include the requested value, and its loop count should be set to a
             suitable value by the ASA. If not, the GRASP default will apply.<a href="#section-2.3.4-1.1.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.1.2.4">Note that a given negotiation session may or may not be a dry-run negotiation;
             the two modes must not be mixed in a single session.<a href="#section-2.3.4-1.1.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.1.2.5">The 'peer' parameter is the target node; it must be an 'ASA_locator' as returned
             by discover(). If the peer is null, GRASP discovery is performed first.<a href="#section-2.3.4-1.1.2.5" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.1.2.6">
                  <p id="section-2.3.4-1.1.2.6.1">If the 'errorcode' return parameter is 0, the negotiation has successfully
             started. There are then two cases:<a href="#section-2.3.4-1.1.2.6.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.3.4-1.1.2.6.2">
                    <li id="section-2.3.4-1.1.2.6.2.1">The 'session_nonce' parameter is null. In this case the negotiation
              has succeeded (the peer has accepted the request). The returned
              'proffered_objective' contains the value accepted by the peer.<a href="#section-2.3.4-1.1.2.6.2.1" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.1.2.6.2.2">
                      <p id="section-2.3.4-1.1.2.6.2.2.1">The 'session_nonce' parameter is not null. In this case negotiation
              must continue. The returned 'proffered_objective' contains the first value
              proffered by the negotiation peer. Note that this instance of the objective
              must be used in the subsequent negotiation call because
              it also contains the current loop count. The 'session_nonce' must be
              presented in all subsequent negotiation steps.<a href="#section-2.3.4-1.1.2.6.2.2.1" class="pilcrow">¶</a></p>
<p id="section-2.3.4-1.1.2.6.2.2.2">
              This function must be followed by calls to 'negotiate_step' and/or 'negotiate_wait'
              and/or 'end_negotiate' until the negotiation ends. 'request_negotiate' may then be called
              again to start a new negotation.<a href="#section-2.3.4-1.1.2.6.2.2.2" class="pilcrow">¶</a></p>
</li>
</ol>
</li>
<li id="section-2.3.4-1.1.2.7">If the 'errorcode' parameter has the value 1 ('declined'), the negotiation has been declined
             by the peer (M_END and O_DECLINE features of GRASP). The 'reason' string is then available for
             information and diagnostic use, but it may be a null string. For this and any other error code,
             an exponential backoff is recommended before any retry.<a href="#section-2.3.4-1.1.2.7" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.1.2.8">Threaded implementation: This should be called in a separate thread if asynchronous operation is required.<a href="#section-2.3.4-1.1.2.8" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.1.2.9">Event loop implementation: The 'session_nonce' parameter is used in read/write mode.<a href="#section-2.3.4-1.1.2.9" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.1.2.10">Use of dry run mode: This must be consistent within a GRASP session. The state of the 'dry'
             flag in the initial request_negotiate() call must be the same in all subsequent negotiation
             steps of the same session. The semantics of the dry run mode are built into the ASA; GRASP
             merely carries the flag bit.<a href="#section-2.3.4-1.1.2.10" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.1.2.11">Special note for the ACP infrastructure ASA: It is likely that this ASA will need to
             discover and negotiate with its peers in each of its on-link neighbors. It will therefore need to
             know not only the link-local IP address but also the physical interface and transport port for
             connecting to each neighbor. One implementation approach to this is to include these
             details in the 'session_nonce' data structure, which is opaque to normal ASAs.<a href="#section-2.3.4-1.1.2.11" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.4-1.2">
              <p id="section-2.3.4-1.2.1">listen_negotiate()<a href="#section-2.3.4-1.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.4-1.2.2.1">
                  <p id="section-2.3.4-1.2.2.1.1">Input parameters:<a href="#section-2.3.4-1.2.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.2.2.1.2">
                    <dt id="section-2.3.4-1.2.2.1.2.1"></dt>
<dd id="section-2.3.4-1.2.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.4-1.2.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.2.2.1.2.3"></dt>
<dd id="section-2.3.4-1.2.2.1.2.4">objective (structure)<a href="#section-2.3.4-1.2.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.2.2.2">
                  <p id="section-2.3.4-1.2.2.2.1">Return parameters:<a href="#section-2.3.4-1.2.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.2.2.2.2">
                    <dt id="section-2.3.4-1.2.2.2.2.1"></dt>
<dd id="section-2.3.4-1.2.2.2.2.2">errorcode (integer)<a href="#section-2.3.4-1.2.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.2.2.2.2.3"></dt>
<dd id="section-2.3.4-1.2.2.2.2.4">session_nonce (structure) (if successful)<a href="#section-2.3.4-1.2.2.2.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.2.2.2.2.5"></dt>
<dd id="section-2.3.4-1.2.2.2.2.6">requested_objective (structure) (if successful)<a href="#section-2.3.4-1.2.2.2.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.2.2.3">This function instructs GRASP to listen for negotiation
             requests for the given 'objective'. It also enables discovery responses for the objective.<a href="#section-2.3.4-1.2.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.2.2.4">Threaded implementation: It will block waiting for an incoming request, so
             should be called in a separate thread if asynchronous operation is required.
             If the ASA supports multiple simultaneous transactions, a new thread must
             be spawned for each new session.<a href="#section-2.3.4-1.2.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.2.2.5">Event loop implementation: A read/write 'session_nonce' parameter is used.
             If the ASA supports multiple simultaneous transactions, a new event must be inserted
             in the event loop for each new session.<a href="#section-2.3.4-1.2.2.5" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.2.2.6">Unless there is an unexpected failure, this call only returns after an
             incoming negotiation request. When it does so,
             'requested_objective' contains the first value requested by
             the negotiation peer. Note that this instance of the objective
             must be used in the subsequent negotiation call because
             it also contains the current loop count. The 'session_nonce' must be
             presented in all subsequent negotiation steps.<a href="#section-2.3.4-1.2.2.6" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.2.2.7">This function must be followed by calls to 'negotiate_step' and/or 'negotiate_wait'
             and/or 'end_negotiate' until the negotiation ends. 'listen_negotiate' may then be called
             again to await a new negotation.<a href="#section-2.3.4-1.2.2.7" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.2.2.8">If an ASA is capable of handling multiple negotiations simultaneously, it may
             call 'listen_negotiate' simultaneously from multiple threads. The API and GRASP implementation
             must support re-entrant use of the listening state and the negotiation calls. Simultaneous
             sessions will be distinguished by the threads themselves, the GRASP Session IDs, and the underlying unicast
             transport sockets.<a href="#section-2.3.4-1.2.2.8" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.4-1.3">
              <p id="section-2.3.4-1.3.1">stop_listen_negotiate()<a href="#section-2.3.4-1.3.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.4-1.3.2.1">
                  <p id="section-2.3.4-1.3.2.1.1">Input parameters:<a href="#section-2.3.4-1.3.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.3.2.1.2">
                    <dt id="section-2.3.4-1.3.2.1.2.1"></dt>
<dd id="section-2.3.4-1.3.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.4-1.3.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.3.2.1.2.3"></dt>
<dd id="section-2.3.4-1.3.2.1.2.4">objective (structure)<a href="#section-2.3.4-1.3.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.3.2.2">
                  <p id="section-2.3.4-1.3.2.2.1">Return parameter:<a href="#section-2.3.4-1.3.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.3.2.2.2">
                    <dt id="section-2.3.4-1.3.2.2.2.1"></dt>
<dd id="section-2.3.4-1.3.2.2.2.2">errorcode (integer)<a href="#section-2.3.4-1.3.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.3.2.3">Instructs GRASP to stop listening for negotiation
             requests for the given objective, i.e., cancels 'listen_negotiate'.<a href="#section-2.3.4-1.3.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.3.2.4">Threaded implementation: Must be called
             from a different thread than 'listen_negotiate'.<a href="#section-2.3.4-1.3.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.3.2.5">Event loop implementation: no special considerations.<a href="#section-2.3.4-1.3.2.5" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.4-1.4">
              <p id="section-2.3.4-1.4.1">negotiate_step()<a href="#section-2.3.4-1.4.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.4-1.4.2.1">
                  <p id="section-2.3.4-1.4.2.1.1">Input parameters:<a href="#section-2.3.4-1.4.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.4.2.1.2">
                    <dt id="section-2.3.4-1.4.2.1.2.1"></dt>
<dd id="section-2.3.4-1.4.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.4-1.4.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.4.2.1.2.3"></dt>
<dd id="section-2.3.4-1.4.2.1.2.4">session_nonce (structure)<a href="#section-2.3.4-1.4.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.4.2.1.2.5"></dt>
<dd id="section-2.3.4-1.4.2.1.2.6">objective (structure)<a href="#section-2.3.4-1.4.2.1.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.4.2.1.2.7"></dt>
<dd id="section-2.3.4-1.4.2.1.2.8">timeout (integer)<a href="#section-2.3.4-1.4.2.1.2.8" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.4.2.2">
                  <p id="section-2.3.4-1.4.2.2.1">Return parameters:<a href="#section-2.3.4-1.4.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.4.2.2.2">
                    <dt id="section-2.3.4-1.4.2.2.2.1"></dt>
<dd id="section-2.3.4-1.4.2.2.2.2">Exactly as for 'request_negotiate'<a href="#section-2.3.4-1.4.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.4.2.3">Executes the next negotation step with the peer. The 'objective' parameter
             contains the next value being proffered by the ASA in this step.<a href="#section-2.3.4-1.4.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.4.2.4">Threaded implementation: Called in the same thread as the preceding 'request_negotiate' or 'listen_negotiate',
             with the same value of 'session_nonce'.<a href="#section-2.3.4-1.4.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.4.2.5">Event loop implementation: Must use the same value of 'session_nonce' returned by the
             preceding 'request_negotiate' or 'listen_negotiate'.<a href="#section-2.3.4-1.4.2.5" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.4-1.5">
              <p id="section-2.3.4-1.5.1">negotiate_wait()<a href="#section-2.3.4-1.5.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.4-1.5.2.1">
                  <p id="section-2.3.4-1.5.2.1.1">Input parameters:<a href="#section-2.3.4-1.5.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.5.2.1.2">
                    <dt id="section-2.3.4-1.5.2.1.2.1"></dt>
<dd id="section-2.3.4-1.5.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.4-1.5.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.5.2.1.2.3"></dt>
<dd id="section-2.3.4-1.5.2.1.2.4">session_nonce (structure)<a href="#section-2.3.4-1.5.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.5.2.1.2.5"></dt>
<dd id="section-2.3.4-1.5.2.1.2.6">timeout (integer)<a href="#section-2.3.4-1.5.2.1.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.5.2.2">
                  <p id="section-2.3.4-1.5.2.2.1">Return parameters:<a href="#section-2.3.4-1.5.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.5.2.2.2">
                    <dt id="section-2.3.4-1.5.2.2.2.1"></dt>
<dd id="section-2.3.4-1.5.2.2.2.2">errorcode (integer)<a href="#section-2.3.4-1.5.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.5.2.3">Delay negotiation session by 'timeout' milliseconds, thereby extending the original timeout. This
             function simply triggers a GRASP Confirm Waiting message.<a href="#section-2.3.4-1.5.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.5.2.4">Threaded implementation: Called in the same thread as the preceding 'request_negotiate' or 'listen_negotiate',
             with the same value of 'session_nonce'.<a href="#section-2.3.4-1.5.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.5.2.5">Event loop implementation: Must use the same value of 'session_nonce' returned by the
             preceding 'request_negotiate' or 'listen_negotiate'.<a href="#section-2.3.4-1.5.2.5" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.4-1.6">
              <p id="section-2.3.4-1.6.1">end_negotiate()<a href="#section-2.3.4-1.6.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.4-1.6.2.1">
                  <p id="section-2.3.4-1.6.2.1.1">Input parameters:<a href="#section-2.3.4-1.6.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.6.2.1.2">
                    <dt id="section-2.3.4-1.6.2.1.2.1"></dt>
<dd id="section-2.3.4-1.6.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.4-1.6.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.6.2.1.2.3"></dt>
<dd id="section-2.3.4-1.6.2.1.2.4">session_nonce (structure)<a href="#section-2.3.4-1.6.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.6.2.1.2.5"></dt>
<dd id="section-2.3.4-1.6.2.1.2.6">reply (Boolean)<a href="#section-2.3.4-1.6.2.1.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.4-1.6.2.1.2.7"></dt>
<dd id="section-2.3.4-1.6.2.1.2.8">reason (UTF-8 string)<a href="#section-2.3.4-1.6.2.1.2.8" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.6.2.2">
                  <p id="section-2.3.4-1.6.2.2.1">Return parameters:<a href="#section-2.3.4-1.6.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.4-1.6.2.2.2">
                    <dt id="section-2.3.4-1.6.2.2.2.1"></dt>
<dd id="section-2.3.4-1.6.2.2.2.2">errorcode (integer)<a href="#section-2.3.4-1.6.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.4-1.6.2.3">
                  <p id="section-2.3.4-1.6.2.3.1">End the negotiation session.<a href="#section-2.3.4-1.6.2.3.1" class="pilcrow">¶</a></p>
<p id="section-2.3.4-1.6.2.3.2">
             'reply' = True for accept (successful negotiation), False for decline (failed negotiation).<a href="#section-2.3.4-1.6.2.3.2" class="pilcrow">¶</a></p>
<p id="section-2.3.4-1.6.2.3.3">
             'reason' = optional string describing reason for decline.<a href="#section-2.3.4-1.6.2.3.3" class="pilcrow">¶</a></p>
</li>
<li id="section-2.3.4-1.6.2.4">Threaded implementation: Called in the same thread as the preceding 'request_negotiate' or 'listen_negotiate',
             with the same value of 'session_nonce'.<a href="#section-2.3.4-1.6.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.4-1.6.2.5">Event loop implementation: Must use the same value of 'session_nonce' returned by the
             preceding 'request_negotiate' or 'listen_negotiate'.<a href="#section-2.3.4-1.6.2.5" class="pilcrow">¶</a>
</li>
</ul>
</li>
</ul>
</section>
<section id="section-2.3.5">
          <h4 id="name-synchronization-and-floodin">
<a href="#section-2.3.5" class="section-number selfRef">2.3.5. </a><a href="#name-synchronization-and-floodin" class="section-name selfRef">Synchronization and Flooding</a>
          </h4>
<ul>
<li id="section-2.3.5-1.1">
              <p id="section-2.3.5-1.1.1">synchronize()<a href="#section-2.3.5-1.1.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.5-1.1.2.1">
                  <p id="section-2.3.5-1.1.2.1.1">Input parameters:<a href="#section-2.3.5-1.1.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.1.2.1.2">
                    <dt id="section-2.3.5-1.1.2.1.2.1"></dt>
<dd id="section-2.3.5-1.1.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.5-1.1.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.1.2.1.2.3"></dt>
<dd id="section-2.3.5-1.1.2.1.2.4">objective (structure)<a href="#section-2.3.5-1.1.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.1.2.1.2.5"></dt>
<dd id="section-2.3.5-1.1.2.1.2.6">peer (ASA_locator)<a href="#section-2.3.5-1.1.2.1.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.1.2.1.2.7"></dt>
<dd id="section-2.3.5-1.1.2.1.2.8">timeout (integer)<a href="#section-2.3.5-1.1.2.1.2.8" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.1.2.2">
                  <p id="section-2.3.5-1.1.2.2.1">Return parameters:<a href="#section-2.3.5-1.1.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.1.2.2.2">
                    <dt id="section-2.3.5-1.1.2.2.2.1"></dt>
<dd id="section-2.3.5-1.1.2.2.2.2">errorcode (integer)<a href="#section-2.3.5-1.1.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.1.2.2.2.3"></dt>
<dd id="section-2.3.5-1.1.2.2.2.4">objective (structure) (if successful)<a href="#section-2.3.5-1.1.2.2.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.1.2.3">This call requests the synchronized value of the given 'objective'.<a href="#section-2.3.5-1.1.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.1.2.4">Since this is essentially a read operation, any ASA can do it. Therefore
             the API checks that the ASA is registered but the objective doesn't need to
             be registered by the calling ASA.<a href="#section-2.3.5-1.1.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.1.2.5">If the objective was already flooded, the flooded value is
             returned immediately in the 'result' parameter. In this case, the 'source' 
             and 'timeout' are ignored.<a href="#section-2.3.5-1.1.2.5" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.1.2.6"> Otherwise, synchronization with a discovered ASA is performed. 
             The 'peer' parameter is an 'ASA_locator' as returned by discover().
             If 'peer' is null, GRASP discovery is performed first.<a href="#section-2.3.5-1.1.2.6" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.1.2.7">This call should be repeated whenever the latest value is needed.<a href="#section-2.3.5-1.1.2.7" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.1.2.8">Threaded implementation: Call in a separate thread if asynchronous operation is required.<a href="#section-2.3.5-1.1.2.8" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.1.2.9">Event loop implementation: An additional read/write 'session_nonce' parameter is used.<a href="#section-2.3.5-1.1.2.9" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.1.2.10">Since this is essentially a read operation, any ASA can use
             it. Therefore GRASP checks that the calling ASA is registered but the
             objective doesn't need to be registered by the calling ASA.<a href="#section-2.3.5-1.1.2.10" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.1.2.11">In the case of failure, an exponential backoff is recommended before retrying.<a href="#section-2.3.5-1.1.2.11" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.5-1.2">
              <p id="section-2.3.5-1.2.1">listen_synchronize()<a href="#section-2.3.5-1.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.5-1.2.2.1">
                  <p id="section-2.3.5-1.2.2.1.1">Input parameters:<a href="#section-2.3.5-1.2.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.2.2.1.2">
                    <dt id="section-2.3.5-1.2.2.1.2.1"></dt>
<dd id="section-2.3.5-1.2.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.5-1.2.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.2.2.1.2.3"></dt>
<dd id="section-2.3.5-1.2.2.1.2.4">objective (structure)<a href="#section-2.3.5-1.2.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.2.2.2">
                  <p id="section-2.3.5-1.2.2.2.1">Return parameters:<a href="#section-2.3.5-1.2.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.2.2.2.2">
                    <dt id="section-2.3.5-1.2.2.2.2.1"></dt>
<dd id="section-2.3.5-1.2.2.2.2.2">errorcode (integer)<a href="#section-2.3.5-1.2.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.2.2.3">This instructs GRASP to listen for synchronization
             requests for the given objective, and to
             respond with the value given in the 'objective' parameter.
             It also enables discovery responses for the objective.<a href="#section-2.3.5-1.2.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.2.2.4">This call is non-blocking and may be repeated whenever the value changes.<a href="#section-2.3.5-1.2.2.4" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.5-1.3">
              <p id="section-2.3.5-1.3.1">stop_listen_synchronize()<a href="#section-2.3.5-1.3.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.5-1.3.2.1">
                  <p id="section-2.3.5-1.3.2.1.1">Input parameters:<a href="#section-2.3.5-1.3.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.3.2.1.2">
                    <dt id="section-2.3.5-1.3.2.1.2.1"></dt>
<dd id="section-2.3.5-1.3.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.5-1.3.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.3.2.1.2.3"></dt>
<dd id="section-2.3.5-1.3.2.1.2.4">objective (structure)<a href="#section-2.3.5-1.3.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.3.2.2">
                  <p id="section-2.3.5-1.3.2.2.1">Return parameters:<a href="#section-2.3.5-1.3.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.3.2.2.2">
                    <dt id="section-2.3.5-1.3.2.2.2.1"></dt>
<dd id="section-2.3.5-1.3.2.2.2.2">errorcode (integer)<a href="#section-2.3.5-1.3.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.3.2.3">This call instructs GRASP to stop listening for synchronization
             requests for the given 'objective', i.e. it cancels a previous listen_synchronize.<a href="#section-2.3.5-1.3.2.3" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.5-1.4">
              <p id="section-2.3.5-1.4.1">flood()<a href="#section-2.3.5-1.4.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.5-1.4.2.1">
                  <p id="section-2.3.5-1.4.2.1.1">Input parameters:<a href="#section-2.3.5-1.4.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.4.2.1.2">
                    <dt id="section-2.3.5-1.4.2.1.2.1"></dt>
<dd id="section-2.3.5-1.4.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.5-1.4.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.4.2.1.2.3"></dt>
<dd id="section-2.3.5-1.4.2.1.2.4">ttl (integer)<a href="#section-2.3.5-1.4.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.4.2.1.2.5"></dt>
<dd id="section-2.3.5-1.4.2.1.2.6">tagged_objective_list (structure)<a href="#section-2.3.5-1.4.2.1.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.4.2.2">
                  <p id="section-2.3.5-1.4.2.2.1">Return parameters:<a href="#section-2.3.5-1.4.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.4.2.2.2">
                    <dt id="section-2.3.5-1.4.2.2.2.1"></dt>
<dd id="section-2.3.5-1.4.2.2.2.2">errorcode (integer)<a href="#section-2.3.5-1.4.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.4.2.3">This call instructs GRASP to flood the given synchronization
             objective(s) and their value(s) and associated locator(s) to all GRASP nodes.<a href="#section-2.3.5-1.4.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.4.2.4">The 'ttl' parameter is the valid lifetime (time to live) of
             the flooded data in milliseconds (0 = infinity)<a href="#section-2.3.5-1.4.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.4.2.5">The 'tagged_objective_list' parameter is a list of one or more 'tagged_objective'
             couplets.
             The 'locator' parameter that tags each objective is normally null but may 
             be a valid 'ASA_locator'.
             Infrastructure ASAs needing to flood an {address, protocol, port} 3-tuple
             with an objective create an ASA_locator object to do so. If the IP address 
             in that locator is the unspecified address
             ('::') it is replaced by the link-local address of the sending node in each
             copy of the flood multicast, which will be forced to have a loop count of 1.
             This feature is for objectives that must be restricted to the local link.<a href="#section-2.3.5-1.4.2.5" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.4.2.6">The function checks that the ASA registered each objective.<a href="#section-2.3.5-1.4.2.6" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.4.2.7">This call may be repeated whenever any value changes.<a href="#section-2.3.5-1.4.2.7" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.5-1.5">
              <p id="section-2.3.5-1.5.1">get_flood()<a href="#section-2.3.5-1.5.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.5-1.5.2.1">
                  <p id="section-2.3.5-1.5.2.1.1">Input parameters:<a href="#section-2.3.5-1.5.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.5.2.1.2">
                    <dt id="section-2.3.5-1.5.2.1.2.1"></dt>
<dd id="section-2.3.5-1.5.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.5-1.5.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.5.2.1.2.3"></dt>
<dd id="section-2.3.5-1.5.2.1.2.4">objective (structure)<a href="#section-2.3.5-1.5.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.5.2.2">
                  <p id="section-2.3.5-1.5.2.2.1">Return parameters:<a href="#section-2.3.5-1.5.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.5.2.2.2">
                    <dt id="section-2.3.5-1.5.2.2.2.1"></dt>
<dd id="section-2.3.5-1.5.2.2.2.2">errorcode (integer)<a href="#section-2.3.5-1.5.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.5.2.2.2.3"></dt>
<dd id="section-2.3.5-1.5.2.2.2.4">tagged_objective_list (structure) (if successful)<a href="#section-2.3.5-1.5.2.2.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.5.2.3">This call instructs GRASP to return the given synchronization
             objective if it has been flooded and its lifetime has not expired.<a href="#section-2.3.5-1.5.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.5.2.4">Since this is essentially a read operation, any ASA can do
             it. Therefore the API checks that the ASA is registered but the
             objective doesn't need to be registered by the calling ASA.<a href="#section-2.3.5-1.5.2.4" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.5.2.5">The 'tagged_objective_list' parameter is a list of 'tagged_objective'
             couplets, each one being a copy of the flooded objective and a coresponding locator.
             Thus if the same objective has been flooded by multiple ASAs, the recipient can distinguish
             the copies.<a href="#section-2.3.5-1.5.2.5" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.5.2.6">Note that this call is for advanced ASAs. In a simple case, an ASA can simply call
             synchronize() in order to get a valid flooded objective.<a href="#section-2.3.5-1.5.2.6" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-2.3.5-1.6">
              <p id="section-2.3.5-1.6.1">expire_flood()<a href="#section-2.3.5-1.6.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.5-1.6.2.1">
                  <p id="section-2.3.5-1.6.2.1.1">Input parameters:<a href="#section-2.3.5-1.6.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.6.2.1.2">
                    <dt id="section-2.3.5-1.6.2.1.2.1"></dt>
<dd id="section-2.3.5-1.6.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.5-1.6.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.5-1.6.2.1.2.3"></dt>
<dd id="section-2.3.5-1.6.2.1.2.4">tagged_objective (structure)<a href="#section-2.3.5-1.6.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.6.2.2">
                  <p id="section-2.3.5-1.6.2.2.1">Return parameters:<a href="#section-2.3.5-1.6.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.5-1.6.2.2.2">
                    <dt id="section-2.3.5-1.6.2.2.2.1"></dt>
<dd id="section-2.3.5-1.6.2.2.2.2">errorcode (integer)<a href="#section-2.3.5-1.6.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.5-1.6.2.3">This is a call that can only be used after a preceding
             call to get_flood() by an ASA that is capable of deciding
             that the flooded value is stale or invalid. Use with care.<a href="#section-2.3.5-1.6.2.3" class="pilcrow">¶</a>
</li>
<li id="section-2.3.5-1.6.2.4">The 'tagged_objective' parameter is the one to be expired.<a href="#section-2.3.5-1.6.2.4" class="pilcrow">¶</a>
</li>
</ul>
</li>
</ul>
</section>
<section id="section-2.3.6">
          <h4 id="name-invalid-message-function">
<a href="#section-2.3.6" class="section-number selfRef">2.3.6. </a><a href="#name-invalid-message-function" class="section-name selfRef">Invalid Message Function</a>
          </h4>
<ul>
<li id="section-2.3.6-1.1">
              <p id="section-2.3.6-1.1.1">send_invalid()<a href="#section-2.3.6-1.1.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.3.6-1.1.2.1">
                  <p id="section-2.3.6-1.1.2.1.1">Input parameters:<a href="#section-2.3.6-1.1.2.1.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.6-1.1.2.1.2">
                    <dt id="section-2.3.6-1.1.2.1.2.1"></dt>
<dd id="section-2.3.6-1.1.2.1.2.2">asa_nonce (integer)<a href="#section-2.3.6-1.1.2.1.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.6-1.1.2.1.2.3"></dt>
<dd id="section-2.3.6-1.1.2.1.2.4">session_nonce (structure)<a href="#section-2.3.6-1.1.2.1.2.4" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
<dt id="section-2.3.6-1.1.2.1.2.5"></dt>
<dd id="section-2.3.6-1.1.2.1.2.6">info (bytes)<a href="#section-2.3.6-1.1.2.1.2.6" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.6-1.1.2.2">
                  <p id="section-2.3.6-1.1.2.2.1">Return parameters:<a href="#section-2.3.6-1.1.2.2.1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3.6-1.1.2.2.2">
                    <dt id="section-2.3.6-1.1.2.2.2.1"></dt>
<dd id="section-2.3.6-1.1.2.2.2.2">errorcode (integer)<a href="#section-2.3.6-1.1.2.2.2.2" class="pilcrow">¶</a>
</dd>
<dd class="break"></dd>
</dl>
</li>
<li id="section-2.3.6-1.1.2.3">
                  <p id="section-2.3.6-1.1.2.3.1">Sends a GRASP Invalid Message (M_INVALID) message, as described in
             <span>[<a href="#I-D.ietf-anima-grasp" class="xref">I-D.ietf-anima-grasp</a>]</span>. Should not be used if end_negotiate() would be sufficient.
             Note that this message may be used in response to any unicast GRASP message that the receiver
             cannot interpret correctly. In most cases this message will be generated internally by a
             GRASP implementation.<a href="#section-2.3.6-1.1.2.3.1" class="pilcrow">¶</a></p>
<p id="section-2.3.6-1.1.2.3.2">
             'info' = optional diagnostic data. May be raw bytes from the invalid message.<a href="#section-2.3.6-1.1.2.3.2" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</section>
</section>
</section>
<section id="section-3">
      <h2 id="name-implementation-status-rfc-e">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-implementation-status-rfc-e" class="section-name selfRef">Implementation Status [RFC Editor: please remove]</a>
      </h2>
<p id="section-3-1">A prototype open source Python implementation of GRASP, including
    an API similar to this document, has been used
    to verify the concepts for the threaded model. It may be found at
    <span><a href="https://github.com/becarpenter/graspy">https://github.com/becarpenter/graspy</a></span>
    with associated documentation and demonstration ASAs.<a href="#section-3-1" class="pilcrow">¶</a></p>
</section>
<div id="security">
<section id="section-4">
      <h2 id="name-security-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-4-1">Security issues for the GRASP protocol are discussed in <span>[<a href="#I-D.ietf-anima-grasp" class="xref">I-D.ietf-anima-grasp</a>]</span>.
      Authorization of ASAs is a subject for future study.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">The 'asa_nonce' parameter is used in the API as a first line of defence against a malware process attempting
      to imitate a legitimately registered ASA. The 'session_nonce' parameter is used in the API as a first line
      of defence against a malware process attempting to hijack a GRASP session.<a href="#section-4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana">
<section id="section-5">
      <h2 id="name-iana-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-5-1">This document makes no request of the IANA.<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ack">
<section id="section-6">
      <h2 id="name-acknowledgements">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-6-1">Excellent suggestions were made by
      Ignas Bagdonas,
      Toerless Eckert,
      Guangpeng Li,
      Michael Richardson,
      and other participants in the ANIMA WG.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-7">
      <h2 id="name-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-anima-grasp">[I-D.ietf-anima-grasp]</dt>
<dd>
<span class="refAuthor">Bormann, C.</span><span class="refAuthor">, Carpenter, B.</span><span class="refAuthor">, and B. Liu</span>, <span class="refTitle">"A Generic Autonomic Signaling Protocol (GRASP)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-anima-grasp-15</span>, <time datetime="2017-07-13">13 July 2017</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-anima-grasp-15">https://tools.ietf.org/html/draft-ietf-anima-grasp-15</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-anima-autonomic-control-plane">[I-D.ietf-anima-autonomic-control-plane]</dt>
<dd>
<span class="refAuthor">Eckert, T.</span><span class="refAuthor">, Behringer, M.</span><span class="refAuthor">, and S. Bjarnason</span>, <span class="refTitle">"An Autonomic Control Plane (ACP)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-anima-autonomic-control-plane-24</span>, <time datetime="2020-03-09">9 March 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-anima-autonomic-control-plane-24">https://tools.ietf.org/html/draft-ietf-anima-autonomic-control-plane-24</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-anima-bootstrapping-keyinfra">[I-D.ietf-anima-bootstrapping-keyinfra]</dt>
<dd>
<span class="refAuthor">Pritikin, M.</span><span class="refAuthor">, Richardson, M.</span><span class="refAuthor">, Eckert, T.</span><span class="refAuthor">, Behringer, M.</span><span class="refAuthor">, and K. Watsen</span>, <span class="refTitle">"Bootstrapping Remote Secure Key Infrastructures (BRSKI)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-anima-bootstrapping-keyinfra-41</span>, <time datetime="2020-04-08">8 April 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-anima-bootstrapping-keyinfra-41">https://tools.ietf.org/html/draft-ietf-anima-bootstrapping-keyinfra-41</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-anima-reference-model">[I-D.ietf-anima-reference-model]</dt>
<dd>
<span class="refAuthor">Behringer, M.</span><span class="refAuthor">, Carpenter, B.</span><span class="refAuthor">, Eckert, T.</span><span class="refAuthor">, Ciavaglia, L.</span><span class="refAuthor">, and J. Nobre</span>, <span class="refTitle">"A Reference Model for Autonomic Networking"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-anima-reference-model-10</span>, <time datetime="2018-11-22">22 November 2018</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-anima-reference-model-10">https://tools.ietf.org/html/draft-ietf-anima-reference-model-10</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.liu-anima-grasp-distribution">[I-D.liu-anima-grasp-distribution]</dt>
<dd>
<span class="refAuthor">Liu, B.</span><span class="refAuthor">, Xiao, X.</span><span class="refAuthor">, Hecker, A.</span><span class="refAuthor">, Jiang, S.</span><span class="refAuthor">, and Z. Despotovic</span>, <span class="refTitle">"Information Distribution in Autonomic Networking"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-liu-anima-grasp-distribution-13</span>, <time datetime="2019-12-12">12 December 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-liu-anima-grasp-distribution-13">https://tools.ietf.org/html/draft-liu-anima-grasp-distribution-13</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="ErrAppx">
<section id="section-appendix.a">
      <h2 id="name-error-codes">
<a href="#section-appendix.a" class="section-number selfRef">Appendix A. </a><a href="#name-error-codes" class="section-name selfRef">Error Codes</a>
      </h2>
<p id="section-appendix.a-1">This Appendix lists the error codes defined so far, with suggested symbolic names
  and corresponding descriptive strings in English. It is expected that complete API
  implementations will provide for localisation of these descriptive strings,
  and that additional error codes will be needed according to implementation details.<a href="#section-appendix.a-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-appendix.a-2">
<pre>
ok               0 "OK"
declined         1 "Declined"
noReply          2 "No reply"
unspec           3 "Unspecified error"
ASAfull          4 "ASA registry full"
dupASA           5 "Duplicate ASA name"
noASA            6 "ASA not registered"
notYourASA       7 "ASA registered but not by you"
notBoth          8 "Objective cannot support both negotiation
                    and synchronization"
notDry           9 "Dry-run allowed only with negotiation"
notOverlap      10 "Overlap not supported by this implementation"
objFull         11 "Objective registry full"
objReg          12 "Objective already registered"
notYourObj      13 "Objective not registered by this ASA"
notObj          14 "Objective not found"
notNeg          15 "Objective not negotiable"
noSecurity      16 "No security"
noDiscReply     17 "No reply to discovery"
sockErrNegRq    18 "Socket error sending negotiation request"
noSession       19 "No session"
noSocket        20 "No socket"
loopExhausted   21 "Loop count exhausted"
sockErrNegStep  22 "Socket error sending negotiation step"
noPeer          23 "No negotiation peer"
CBORfail        24 "CBOR decode failure"
invalidNeg      25 "Invalid Negotiate message"
invalidEnd      26 "Invalid end message"
noNegReply      27 "No reply to negotiation step"
noValidStep     28 "No valid reply to negotiation step"
sockErrWait     29 "Socket error sending wait message"
sockErrEnd      30 "Socket error sending end message"
IDclash         31 "Incoming request Session ID clash"
notSynch        32 "Not a synchronization objective"
notFloodDisc    33 "Not flooded and no reply to discovery"
sockErrSynRq    34 "Socket error sending synch request"
noListener      35 "No synch listener"
noSynchReply    36 "No reply to synchronization request"
noValidSynch    37 "No valid reply to synchronization request"
invalidLoc      38 "Invalid locator"
</pre><a href="#section-appendix.a-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="changes">
<section id="section-appendix.b">
      <h2 id="name-change-log-rfc-editor-pleas">
<a href="#section-appendix.b" class="section-number selfRef">Appendix B. </a><a href="#name-change-log-rfc-editor-pleas" class="section-name selfRef">Change log [RFC Editor: Please remove]</a>
      </h2>
<p id="section-appendix.b-1">draft-ietf-anima-grasp-api-05, 2020-05-08:<a href="#section-appendix.b-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-2.1">Converted to xml2rfc v3<a href="#section-appendix.b-2.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-2.2">Editorial fixes.<a href="#section-appendix.b-2.2" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-3">draft-ietf-anima-grasp-api-04, 2019-10-07:<a href="#section-appendix.b-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-4.1">Improved discussion of layering, mentioned daemon.<a href="#section-appendix.b-4.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-4.2">Added callbacks and improved description of asynchronous operations.<a href="#section-appendix.b-4.2" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-4.3">Described use case for 'session_nonce'.<a href="#section-appendix.b-4.3" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-4.4">More explanation of 'asa_nonce'.<a href="#section-appendix.b-4.4" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-4.5">Change 'discover' to use 'age_limit' instead of 'flush'.<a href="#section-appendix.b-4.5" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-4.6">Clarified use of 'dry run'.<a href="#section-appendix.b-4.6" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-4.7">Editorial improvements.<a href="#section-appendix.b-4.7" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-5">draft-ietf-anima-grasp-api-03, 2019-01-21:<a href="#section-appendix.b-5" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-6.1">Replaced empty "logic flows" section by "implementation status".<a href="#section-appendix.b-6.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-6.2">Minor clarifications.<a href="#section-appendix.b-6.2" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-6.3">Editorial improvements.<a href="#section-appendix.b-6.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-7">draft-ietf-anima-grasp-api-02, 2018-06-30:<a href="#section-appendix.b-7" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-8.1">Additional suggestion for event-loop API.<a href="#section-appendix.b-8.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-8.2">Discussion of error code values.<a href="#section-appendix.b-8.2" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-9">draft-ietf-anima-grasp-api-01, 2018-03-03:<a href="#section-appendix.b-9" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-10.1">Editorial updates<a href="#section-appendix.b-10.1" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-11">draft-ietf-anima-grasp-api-00, 2017-12-23:<a href="#section-appendix.b-11" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-12.1">WG adoption<a href="#section-appendix.b-12.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-12.2">Editorial improvements.<a href="#section-appendix.b-12.2" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-13">draft-liu-anima-grasp-api-06, 2017-11-24:<a href="#section-appendix.b-13" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-14.1">Improved description of event-loop model.<a href="#section-appendix.b-14.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-14.2">Changed intended status to Informational.<a href="#section-appendix.b-14.2" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-14.3">Editorial improvements.<a href="#section-appendix.b-14.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-15">draft-liu-anima-grasp-api-05, 2017-10-02:<a href="#section-appendix.b-15" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-16.1">Added send_invalid()<a href="#section-appendix.b-16.1" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-17">draft-liu-anima-grasp-api-04, 2017-06-30:<a href="#section-appendix.b-17" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-18.1">Noted that simple nodes might not include the API.<a href="#section-appendix.b-18.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-18.2">Minor clarifications.<a href="#section-appendix.b-18.2" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-19">draft-liu-anima-grasp-api-03, 2017-02-13:<a href="#section-appendix.b-19" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-20.1">Changed error return to integers.<a href="#section-appendix.b-20.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-20.2">Required all implementations to accept objective values in CBOR.<a href="#section-appendix.b-20.2" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-20.3">Added non-blocking alternatives.<a href="#section-appendix.b-20.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-21">draft-liu-anima-grasp-api-02, 2016-12-17:<a href="#section-appendix.b-21" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-22.1">Updated for draft-ietf-anima-grasp-09<a href="#section-appendix.b-22.1" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-23">draft-liu-anima-grasp-api-02, 2016-09-30:<a href="#section-appendix.b-23" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-24.1">Added items for draft-ietf-anima-grasp-07<a href="#section-appendix.b-24.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-24.2">Editorial corrections<a href="#section-appendix.b-24.2" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-25">draft-liu-anima-grasp-api-01, 2016-06-24:<a href="#section-appendix.b-25" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-26.1">Updated for draft-ietf-anima-grasp-05<a href="#section-appendix.b-26.1" class="pilcrow">¶</a>
</li>
<li id="section-appendix.b-26.2">Editorial corrections<a href="#section-appendix.b-26.2" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-appendix.b-27">draft-liu-anima-grasp-api-00, 2016-04-04:<a href="#section-appendix.b-27" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.b-28.1">Initial version<a href="#section-appendix.b-28.1" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.c">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Brian Carpenter</span></div>
<div dir="auto" class="left"><span class="street-address">School of Computer Science<br>University of Auckland<br>PB 92019</span></div>
<div dir="auto" class="left">
<span class="locality">Auckland</span> <span class="postal-code">1142</span>
</div>
<div dir="auto" class="left"><span class="country-name">New Zealand</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:brian.e.carpenter@gmail.com" class="email">brian.e.carpenter@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Bing Liu (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Huawei Technologies</span></div>
<div dir="auto" class="left"><span class="street-address">Q14, Huawei Campus<br>No.156 Beiqing Road</span></div>
<div dir="auto" class="left"><span class="locality">Hai-Dian District, Beijing</span></div>
<div dir="auto" class="left"><span class="postal-code">100095</span></div>
<div dir="auto" class="left"><span class="country-name">P.R. China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:leo.liubing@huawei.com" class="email">leo.liubing@huawei.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Wendong Wang</span></div>
<div dir="auto" class="left"><span class="org">BUPT University</span></div>
<div dir="auto" class="left"><span class="street-address">Beijing University of Posts &amp; Telecom.<br>No.10 Xitucheng Road</span></div>
<div dir="auto" class="left"><span class="locality">Hai-Dian District, Beijing 100876</span></div>
<div dir="auto" class="left"><span class="country-name">P.R. China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:wdwang@bupt.edu.cn" class="email">wdwang@bupt.edu.cn</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Xiangyang Gong</span></div>
<div dir="auto" class="left"><span class="org">BUPT University</span></div>
<div dir="auto" class="left"><span class="street-address">Beijing University of Posts &amp; Telecom.<br>No.10 Xitucheng Road</span></div>
<div dir="auto" class="left"><span class="locality">Hai-Dian District, Beijing 100876</span></div>
<div dir="auto" class="left"><span class="country-name">P.R. China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:xygong@bupt.edu.cn" class="email">xygong@bupt.edu.cn</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
